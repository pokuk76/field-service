<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Field Builder</title>
		
		<!-- Custom styles, Bootstrap CSS -->
		<link rel="stylesheet" href="styles.css" >
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

		<!-- jQuery, Popper, Bootstrap, Babel, FieldService -->
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
		<!-- <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> -->
		<script src="FieldService.js"></script>
	
	</head>
	
	<body>
		<main id="main">
		
			<div id="heading">
				<h1 id="title">FieldBuilder</h1>
			</div>
			
			<div id="form-container">			
			<form id="field-builder-form" class="needs-validation" action="#" novalidate>
				<div class="form-group row">
					<label for="label" id="label-label" class="col-sm-3 col-form-label">
						Label
					</label><br>
					<input id="label" class="col-sm-7 form-control" type="text" 
					placeholder=" Enter a label..." value="" required onchange="handleLabelChange(event)">
					<div id="label-required-feedback" class="invalid-feedback">
						Please enter a label
					</div>
				</div>		
				

				<div class="form-group row form-group-spacing">
					<label class="col-sm-3 col-form-label">Type</label>
					<div id="type-group" class="col-sm-9">
						<select id="type" class="col-sm-4 form-control" name="role">
							<option value="multi-select" selected>Multi-select</option>
							<option value="single-select">Single-select</option>
							<option value="other">Other</option>
						</select>
						
						<span class="col-sm-4">
							<input type="checkbox" id="required" name="value-required" value="value-required">
							<label for="value-required" class="text-muted" >A Value is required</label>
						<span>
					</div>
				</div>
			  
			
				<div class="form-group row form-group-spacing">
					<label for="default" id="default-label" class="col-sm-3 col-form-label">
						Default Value
					</label><br>
					<input id="default" class="col-sm-7 form-control" type="text" value="" 
					placeholder=" Enter a default choice..." onchange="handleDefaultChange(event)">
				</div>


				<div id="choices-row" class="form-group row form-group-spacing">
					<label for="choices" id="choices-label" class="col-sm-3 col-form-label">
						Choices
					</label><br>
					<div id="choices-group" class="col-sm-9">
					<!-- Removed type attribute on this input to bypass queryselectors in FieldService -->
						<input id="choices" class="col-sm-7 form-control" value="" 
						placeholder=" Enter a choice..." onchange="handleChoicesChange(event)">

						<button type="button" id="add-choice-button" class="btn btn-primary col-sm-3" 
						onclick="handleChoices(event)">
						+
						</button>
					</div>
					<span class="help-text col-sm-5">Hit enter to add choice</span>
				</div>
				<div id="added-choices">
				</div>
				
			
				<div class="form-group row form-group-spacing">
					<label for="order" class="col-sm-3 col-form-label">Order</label><br>
					<select id="order" class="col-sm-7 form-control" name="order">
						<option value="alpha" selected>Display choices in alphabetical order</option>
						<option value="reverse alpha">Display choices in reverse alphabetical order</option>
						<option value="reverse alpha">Display choices in order provided</option>
						<option value="reverse alpha">Display choices in reverse order provided</option>
						<option value="other">Other</option>
					</select>
				</div>
				
				
				<div class="row form-group-spacing">
					<div class="col-sm-3"></div>
					<div id="action-group" class="col-sm-9">
						<button type="button" id="save" class="btn btn-success" value="Save" onclick="FieldService.saveField(event)">
							Save Changes
						</button>
						Or 
						<span id="cancel" onclick="FieldService.resetField(event)">Cancel</span>
					</div>
				</div>
			
			</form>
			</div>
		  
		</main>
	</body>
	
	<script>
		var input = document.querySelector("#choices");
		input.addEventListener("keyup", function(event) {
			if (event.keyCode === 13) {
				event.preventDefault();
				// event.stopPropagation();
				handleChoices(event);
			}
		});
	</script>
</html>